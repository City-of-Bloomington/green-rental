{% extends "layout.html" %}

{% block title %}Rent Rocket: Map{% endblock %}

{% block content %}

{% if user.is_authenticated %}
<p>Welcome back, {{ user.username }}. <a href="logout">Log out.</a></p>
{% else %}
{#<p>Please <a href="login">log in</a> or <a href="{% url registration.views.register %}">sign up</a>. </p>#}
{% endif %}

<div id="map-canvas" style="width: 100%; height: 100%"></div>

{% endblock %} {# content #}
    
{% block script %}
<script type="text/javascript">
  //this allows require.js to be in a different directory (lib)
  //than main custom code
  require.config({
    baseUrl: '/static/js',
    paths: {
      'jquery' : 'lib/jquery-1.7.1',
      'lodash' : 'lib/lodash',
      'ko'     : 'lib/knockout-2.2.1.js'
      }
    });
  require(['main'], function(main) {});
</script>

<script type="text/javascript"
	src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA4IdfaMTubt_BwFSOZcof9j0kM8NaI8WA&sensor=true">
</script>


<script type="text/javascript" src="/static/js/map.js"></script>

<script type="text/javascript">
  var rr = RRMap();

  rr.zoom = {{ zoom }};
  rr.lat = {{ lat }};
  rr.lng = {{ lng }};

  google.maps.event.addDomListener(window, 'load', rr.initialize);

  //set_globals({{ zoom }}, {{ lat }}, {{ lng }});
</script>

{% endblock %}
