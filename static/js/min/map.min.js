var RRMap=function(){var e=this;return e.zoom=14,e.lat=18.427288,e.lng=-64.446392,e.map,e.city_tag=!1,e.markers=[],e.showMarkers=function(){var o=e.map.getBounds(),a=o.getSouthWest(),n=o.getNorthEast(),t="/building/";e.city_tag&&(t+="in/"+e.city_tag+"/"),t+="between/"+a.lat()+"/"+a.lng()+"/and/"+n.lat()+"/"+n.lng(),$.ajax({url:t}).done(function(o){for(var a,n,t=0,r=e.markers.length;r>t;t++)a=e.markers[t],a.setMap(null);e.markers.length=0;for(var g=o.cutoffs[0],s=o.cutoffs[1],i=o.cutoffs[2],m=o.cutoffs[3],t=0,r=o.buildings.length;r>t;t++){n=o.buildings[t],a=new google.maps.Marker({position:new google.maps.LatLng(n.lat,n.lng),map:e.map,title:n.address});var l;l=0==n.score?"/static/img/marker-light_gray.png":1e-4==n.score?"/static/img/marker-dark_gray.png":n.score>=m?"/static/img/marker-green.png":n.score>=i?"/static/img/marker-yellow.png":n.score>=s?"/static/img/marker-orange.png":n.score>=g?"/static/img/marker-red.png":"/static/img/marker-light_gray.png";var p={url:l,scaledSize:new google.maps.Size(23,40),anchor:new google.maps.Point(12,40)};a.setIcon(p),e.update_info(n.profile,a),e.markers.push(a)}})},e.update_info=function(o,a){google.maps.event.addListener(a,"click",function(){e.infowindow.setContent(o),infowindow.open(map,a)})},e.initialize=function(){var o={center:new google.maps.LatLng(e.lat,e.lng),zoom:zoom,mapTypeId:google.maps.MapTypeId.ROADMAP};e.map=new google.maps.Map(document.getElementById("map-canvas"),o),e.map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(document.getElementById("legend")),e.map.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(document.getElementById("map-search")),e.infowindow=new google.maps.InfoWindow,google.maps.event.addListener(e.map,"idle",e.showMarkers)},e};