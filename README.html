<h1 id="rent-rocket">Rent Rocket</h1>
<p>Rent Rocket is a web based application for crowdsourcing energy usage in rental properties.  The goal is to enable renters to make informed decisions of where to rent based on the total cost of a rental property.  We hope that this will increase demand for more energy efficient units, which in turn will encourage property owners to improve the energy efficiency of their properties. </p>
<p>Rent Rocket uses the following tools and resources to implement the application:</p>
<p><a href="http://www.python.org/">http://www.python.org/</a></p>
<p><a href="https://www.djangoproject.com/">https://www.djangoproject.com/</a></p>
<p><a href="https://developers.google.com/appengine/?csw=1">https://developers.google.com/appengine/?csw=1</a></p>
<p><a href="http://www.mysql.com/">http://www.mysql.com/</a></p>
<p><a href="https://developers.google.com/maps/documentation/javascript/">https://developers.google.com/maps/documentation/javascript/</a></p>
<p><a href="https://code.google.com/p/geopy/">https://code.google.com/p/geopy/</a></p>
<p><a href="http://www.rentrocket.org/building/bloomington_in">http://www.rentrocket.org/building/bloomington_in</a></p>
<p><a href="http://git-scm.com/">http://git-scm.com/</a></p>
<p>Source code is available here:</p>
<p><a href="https://github.com/City-of-Bloomington/green-rental">https://github.com/City-of-Bloomington/green-rental</a></p>
<h2 id="requirements-">Requirements:</h2>
<p>Python, a MySQL server, Django, and the Google App Engine SDK are required for running a local development environment. </p>
<p>Other required libraries have been included in the local project directory so they will be available when deployed to App Engine.  They should be available already. </p>
<h2 id="development-server-">Development Server:</h2>
<p>For starting a local development server:</p>
<pre><code> /path/to/google_appengine/dev_appserver.py rentrocket</code></pre>
<p>Where rentrocket is your local copy of this repository. </p>
<h2 id="database-synchronization-">Database synchronization:</h2>
<p>A development server won&#39;t do much until the database schema is in place and initial data has been created.  This is done with:</p>
<pre><code> python manage.py syncdb</code></pre>
<p><a href="https://docs.djangoproject.com/en/dev/howto/initial-data/#where-django-finds-fixtures">https://docs.djangoproject.com/en/dev/howto/initial-data/#where-django-finds-fixtures</a>
may need to do this manually... good way to verify it works if values not shown</p>
<pre><code> python manage.py loaddata rentrocket/fixtures/initial_data.json</code></pre>
<p>field type reference:
<a href="https://docs.djangoproject.com/en/1.5/ref/models/fields/#django.db.models.CharField">https://docs.djangoproject.com/en/1.5/ref/models/fields/#django.db.models.CharField</a></p>
<pre><code>./manage.py schemamigration building --auto
./manage.py schemamigration city --auto
./manage.py schemamigration content --auto
./manage.py schemamigration inspection --auto
./manage.py schemamigration manager --auto
./manage.py schemamigration person --auto
./manage.py schemamigration utility --auto
./manage.py schemamigration source --auto


./manage.py migrate building
./manage.py migrate city
./manage.py migrate content
./manage.py migrate inspection
./manage.py migrate manager
./manage.py migrate person
./manage.py migrate utility
./manage.py migrate source

./manage.py migrate allauth.socialaccount

python ./scripts/make_cities.py

#if enabled: (not currently)
./manage.py migrate allauth.socialaccount.providers.facebook
./manage.py migrate allauth.socialaccount.providers.twitter</code></pre>
<h2 id="database-reset-">Database reset:</h2>
<p>Remove existing tables with a tool like Sequel Pro.  Then resync as above:</p>
<pre><code>python manage.py syncdb</code></pre>
<h2 id="production-">Production:</h2>
<pre><code>SETTINGS_MODE=&#39;prod&#39; ./manage.py migrate building
SETTINGS_MODE=&#39;prod&#39; ./manage.py migrate city
SETTINGS_MODE=&#39;prod&#39; ./manage.py migrate content
SETTINGS_MODE=&#39;prod&#39; ./manage.py migrate inspection
SETTINGS_MODE=&#39;prod&#39; ./manage.py migrate manager
SETTINGS_MODE=&#39;prod&#39; ./manage.py migrate person
SETTINGS_MODE=&#39;prod&#39; ./manage.py migrate utility
SETTINGS_MODE=&#39;prod&#39; ./manage.py migrate source
SETTINGS_MODE=&#39;prod&#39; ./manage.py migrate allauth.socialaccount


SETTINGS_MODE=&#39;prod&#39; ./manage.py migrate allauth.socialaccount.providers.facebook
SETTINGS_MODE=&#39;prod&#39; ./manage.py migrate allauth.socialaccount.providers.twitter


SETTINGS_MODE=&#39;prod&#39; </code></pre>
<h2 id="creating-initial-migrations-with-south-">Creating initial migrations with South:</h2>
<p>Shouldn&#39;t need to do this often / ever:</p>
<pre><code>rm -rf building/migrations
rm -rf city/migrations
rm -rf content/migrations
rm -rf inspection/migrations
rm -rf manager/migrations
rm -rf person/migrations
rm -rf utility/migrations
rm -rf source/migrations

./manage.py schemamigration building --initial
./manage.py schemamigration city --initial
./manage.py schemamigration content --initial
./manage.py schemamigration inspection --initial
./manage.py schemamigration manager --initial
./manage.py schemamigration person --initial
./manage.py schemamigration utility --initial
./manage.py schemamigration source --initial</code></pre>
<h2 id="other-dependencies-">Other Dependencies:</h2>
<p>As mentioned above, these have been included locally already:</p>
<p>   sudo pip install geopy</p>
<p>for database migrations:</p>
<p>   sudo pip install South</p>
